<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Edi Liberato blog</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="A collection of cadquery models for beginners">
  <meta name="author" content="Edi Liberato">
  <meta name="generator" content="Hugo 0.155.2">

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://eddieliberato.github.io/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="https://eddieliberato.github.io/plugins/themify-icons/themify-icons.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://eddieliberato.github.io/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://eddieliberato.github.io/images/favicon.png" type="image/x-icon">
  <link rel="icon" href="https://eddieliberato.github.io/images/favicon.png" type="image/x-icon">

  

  
<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
    "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
  }
}
</script>

</head>

<body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0">
      <a class="navbar-brand mobile-view" href="https://eddieliberato.github.io/"><img class="img-fluid"
          src="https://eddieliberato.github.io/images/logo.png" alt="Edi Liberato blog"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <div class="desktop-view">
          <ul class="navbar-nav mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.youtube.com/user/eddiekvh"><i class="ti-youtube"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/eddieliberato"><i class="ti-github"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.instagram.com/eddieliberato"><i class="ti-instagram"></i></a>
            </li>
            
          </ul>
        </div>

        <a class="navbar-brand mx-auto desktop-view" href="https://eddieliberato.github.io/"><img class="img-fluid"
            src="https://eddieliberato.github.io/images/logo.png" alt="Edi Liberato blog"></a>

        <ul class="navbar-nav">
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://eddieliberato.github.io/about">About</a>
          </li>
          
          
        </ul>

        
        <!-- search -->
        <div class="search pl-lg-4">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://eddieliberato.github.io//search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        

        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation -->

<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 mx-auto">
        
        <a href="/categories/programming"
          class="text-primary">Programming</a>
        
        <h2>A Collection of Cadquery Parametric Models (2018-2022)</h2>
        <div class="mb-3 post-meta">
          <span>By Edi Liberato</span>
          
          <span class="border-bottom border-primary px-2 mx-1"></span>
          <span>26 June 2022</span>
          
        </div>
        
        <img src="https://eddieliberato.github.io/images/post/cadquery-collection/montage.svg" class="img mb-4" alt="A Collection of Cadquery Parametric Models (2018-2022)">
        
        <div class ="tags-border">
          <div class="content mb-5">
            <p>The title says it all, but I will elaborate a bit more.</p>
<p>When I started this blog I had the intention of writing about parametric 3d design using open source software. Years have gone by, and I am now deciding to have a more open approach and write about everything that I feel like. To make things a bit more organized I am putting all the blog entries from 2018 to 2020 in this single one. The table of contents below should help in jumping quickly to whatever you find interesting.</p>
<p>If you are wondering why I left the <a href="https://eddieliberato.github.io/blog/2020-05-14-dogbones/">dogbones</a> as a separate blog post, here is the answer: This is by far the page with the most hits on my blog. Americans seem to like it, and for that reason I decided to leave it untouched. Thinking about it I can see it as a great model to show the benefits of parametric design. Only a few lines of code and TA-DA, you&rsquo;ve got your model and you can easily modify the dimensions as you wish. Simple and efficient, CAD guru stuff.</p>
<p>I also left the chess set post as a historical landmark, after all it was the first blog post on this platform (github pages), by coincidence, exactly 4 years ago.</p>
<p>Final thing I want to mention: Looking at the analytics of the website, no one seems to care about the kugelwellen horn. I personally find this kind of design, that uses physics equations to model things, of great value on the skill-set of an engineer.</p>
<div>
    <h4>Table of Contents</h4>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#turners-cube-04072018">Turners Cube (04/07/2018)</a></li>
    <li><a href="#cd-organizer-18082018">CD Organizer (18/08/2018)</a></li>
    <li><a href="#kugelwellenhorn-19082018">Kugelwellenhorn (19/08/2018)</a></li>
    <li><a href="#dovetail-guide-01042019">Dovetail Guide (01/04/2019)</a></li>
    <li><a href="#sawing-guides-08052020">Sawing Guides (08/05/2020)</a></li>
    <li><a href="#parametric-spiral-lampshade-11052020">Parametric Spiral Lampshade (11/05/2020)</a></li>
    <li><a href="#plywood-connectors-13052020">Plywood Connectors (13/05/2020)</a></li>
    <li><a href="#man-against-washing-machine-15052020">Man Against Washing Machine (15/05/2020)</a></li>
    <li><a href="#parametric-stepper-motor-bracket-01022020">Parametric Stepper Motor Bracket (01/02/2020)</a></li>
    <li><a href="#a-screwed-knob-10032022">A screwed knob (10/03/2022)</a></li>
  </ul>
</nav>
</div>

<h3 id="turners-cube-04072018">Turners Cube (04/07/2018)</h3>
<p><img src="../../images/post/cadquery-collection/turners_cube.svg" alt="turners_cube"></p>
<p>Back in Brazil, during my machinist apprenticeship, one of the lathe tasks of the manual machining course was to make a turners cube (outlined on the image above ðŸ‘†). Basically you need to turn a cube in the lathe and make some holes, that if carefully bored to specific dimensions, you end up with usually two captive cubes inside one another. At the time I was only a young teenager and the captive cube was a very attractive challenge to me. I naively thought that only round parts could be made at the lathe, so I was impressed with the cube with other cubes inside coming out of the machine. Sadly nowadays I don&rsquo;t know anymore where mine is. Hopefully at my mom&rsquo;s place.</p>
<p>You can have as many cubes as you want inside. Back then,  the ones who actually made the cube usually went for three and so I did and I still think that three is the right number if you&rsquo;re doing it on the manual lathe. Two is too easy. Four is annoying because there is a lot of repetition of the same operations. Three is a good number because you proved your point in showing the instructor what you&rsquo;re capable of, and is not as annoying to make as the four cubes version.</p>
<p>Leaving 2003 behind and back to 2018, I was thinking that the repetitive nature of the object makes it a nice model for cadqquery. So here is the script that I came up with:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">captive_cube_size</span> <span class="o">=</span> <span class="mi">10</span>    <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">n_of_cubes</span> <span class="o">=</span> <span class="mi">3</span>            <span class="c1"># besides the innermost captive cube</span>
</span></span><span class="line"><span class="cl"><span class="n">small_holes</span> <span class="o">=</span> <span class="kc">True</span>        <span class="c1"># False = innermost captive cube without holes</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cube_size</span> <span class="o">=</span> <span class="n">captive_cube_size</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="n">n_of_cubes</span>  <span class="c1"># total size of the cube</span>
</span></span><span class="line"><span class="cl"><span class="n">sh_size</span> <span class="o">=</span> <span class="n">captive_cube_size</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>          <span class="c1"># diameter of the hole on the smallest cube</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cube</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;front&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="n">cube_size</span><span class="p">,</span> <span class="n">cube_size</span><span class="p">,</span> <span class="n">cube_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_of_cubes</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">cube_size</span><span class="o">-</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">cube_size</span><span class="o">-</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">cube_size</span><span class="o">-</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">cube_size</span><span class="o">-</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">cube_size</span><span class="o">-</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">cube_size</span><span class="o">-</span><span class="n">captive_cube_size</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">small_holes</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">sh_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">sh_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">sh_size</span><span class="p">)</span>
</span></span></code></pre></div><p>I based my script in the innermost captive cube and in the square root of 2, which is a number associated with circles and squares. That makes the cube look good and proportional. The drawback is that the final size grows quadratically with the number of cubes resulting in a big thing if you go for a lot of cubes.</p>
<h3 id="cd-organizer-18082018">CD Organizer (18/08/2018)</h3>
<p><img src="../../images/post/cadquery-collection/cdorg.svg" alt="cd-org2"></p>
<p>I had some old CDs lying around the house and I decided to organize them in a single place. I thought of 3d printing something to help, but after a brief search around the internet I couldn&rsquo;t find anything that I liked. The ones I could find were big and clunky, leading to long printing times. The &ldquo;simple&rdquo; one (that wasn&rsquo;t simple at all) that I found had the slots a bit undersized and I couldn&rsquo;t fit the CDs. I could have re-scaled the model but that print took me around 3 hours and I started to wonder if I should repeat it.</p>
<p>I decided to come up with my own design.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">slots</span> <span class="o">=</span> <span class="mi">8</span>               <span class="c1"># number slots (number of CDs in this case)</span>
</span></span><span class="line"><span class="cl"><span class="n">slot_width</span> <span class="o">=</span> <span class="mf">11.0</span>       <span class="c1"># mm, slot size (slightly bigger than a CD case width) </span>
</span></span><span class="line"><span class="cl"><span class="n">slot_depth</span> <span class="o">=</span> <span class="mf">20.0</span>       <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">slot_length</span> <span class="o">=</span> <span class="mf">140.0</span>     <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">thickness_wall</span> <span class="o">=</span> <span class="mf">0.8</span>    <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">thickness_bottom</span> <span class="o">=</span> <span class="mf">2.0</span>  <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">spacing</span> <span class="o">=</span> <span class="n">slot_width</span> <span class="o">+</span> <span class="n">thickness_wall</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cdorg</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;front&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="n">slot_length</span><span class="o">+</span><span class="n">thickness_wall</span><span class="p">,</span> <span class="n">spacing</span><span class="o">*</span><span class="n">slots</span><span class="o">+</span><span class="n">thickness_wall</span><span class="p">,</span> <span class="n">slot_depth</span><span class="o">+</span><span class="n">thickness_bottom</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="n">thickness_wall</span><span class="p">,</span><span class="o">-</span><span class="p">(</span><span class="n">spacing</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">slots</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span><span class="o">.</span><span class="n">pushPoints</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span> <span class="o">*</span> <span class="n">spacing</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">slots</span><span class="p">)])</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">slot_length</span><span class="o">+</span><span class="n">thickness_wall</span><span class="p">,</span> <span class="n">slot_width</span><span class="p">)</span><span class="o">.</span><span class="n">cutBlind</span><span class="p">(</span><span class="o">-</span><span class="n">slot_depth</span><span class="p">)</span><span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">slot_length</span><span class="o">/</span><span class="mf">1.6</span><span class="p">,</span> <span class="n">spacing</span><span class="o">*</span><span class="n">slots</span><span class="o">+</span><span class="n">thickness_wall</span><span class="p">)</span><span class="o">.</span><span class="n">cutBlind</span><span class="p">(</span><span class="o">-</span><span class="n">slot_depth</span><span class="p">)</span>
</span></span></code></pre></div><p>The print took only 14 minutes because I could take advantage of the 0.8mm nozzle and print the walls in a single pass of the hotend. The design turned out to be not super visually appealing but the function was on point. It keeps the CDs more accessible than just piling them up and it makes everything more stable against tipping over.</p>
<p>More important than the physical object itself was that I learned something. I find this method of using the for loop (python&rsquo;s list comprehension) inside the pushPoints method very elegant and I plan to reuse this code for lathe tools and drill bits organizers among others.</p>
<p><img src="../../images/post/cadquery-collection/cd_organizer2.jpg" alt="cd_organizer"></p>
<h3 id="kugelwellenhorn-19082018">Kugelwellenhorn (19/08/2018)</h3>
<p><img src="../../images/post/cadquery-collection/kugelwellenhorn.svg" alt="horn-cad"></p>
<p>I have always been intrigued by horns. Actually by passive devices in general; tuned mass dampers, RLC circuits to name a few. Researching more about horns I found two designs that I&rsquo;d like to explore more. One is the Kugelwellenhorn and the other is the Le Cleah&rsquo;c horn. More info about the former can be found <a href="http://www.rintelen.ch/download/JMMLC_horns_lecture_etf10.pdf" title="lecleach">here</a>, in a lecture apparently gaven by Le Cleach&rsquo;c himself when he was still alive.</p>
<p>About Kugellwellen horn, the design that I decided to approach first, all the info you need you can probably find on the site of <a href="http://kolbrek.hoyttalerdesign.no/index.php/horns/horn-theory" title="kolbrek horn theory">Bjorn Kolbrek</a>. Kolbrek seems to be an expert on the subject, and I enjoyed reading his articles. The math on his reports was a bit beyond my comprehension and I didn&rsquo;t want to dive so deep into the subject. My goal was only to design and materialize the horn. Turns out that this is not hard at all, Just take a look at the script below and you&rsquo;ll see that all you need is about 30 lines of code.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">exp</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">td</span> <span class="o">=</span> <span class="mi">12</span>      <span class="c1"># mm, throat diameter</span>
</span></span><span class="line"><span class="cl"><span class="n">steps</span> <span class="o">=</span> <span class="mi">450</span>  <span class="c1"># related to the length of the horn</span>
</span></span><span class="line"><span class="cl"><span class="n">fc</span> <span class="o">=</span> <span class="mi">480</span>     <span class="c1"># Hz, cuttof frequency</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">c</span> <span class="o">=</span> <span class="mi">344000</span>   <span class="c1"># mm/s, speed of sound through air</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">m</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">fc</span><span class="o">/</span><span class="n">c</span>
</span></span><span class="line"><span class="cl"><span class="n">y0</span> <span class="o">=</span> <span class="n">td</span><span class="o">/</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">r0</span> <span class="o">=</span> <span class="n">c</span><span class="o">/</span><span class="p">(</span><span class="n">pi</span><span class="o">*</span><span class="n">fc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">h0</span> <span class="o">=</span> <span class="n">r0</span> <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r0</span><span class="o">*</span><span class="n">r0</span><span class="o">-</span><span class="n">y0</span><span class="o">*</span><span class="n">y0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">s0</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">r0</span><span class="o">*</span><span class="n">h0</span>
</span></span><span class="line"><span class="cl"><span class="n">edg_points</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">h</span> <span class="o">=</span> <span class="n">h0</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">r0</span><span class="o">*</span><span class="n">h</span>
</span></span><span class="line"><span class="cl">    <span class="n">y</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">((</span><span class="n">s</span><span class="o">/</span><span class="n">pi</span><span class="p">)</span><span class="o">-</span><span class="n">h</span><span class="o">*</span><span class="n">h</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">xh</span> <span class="o">=</span> <span class="n">x</span><span class="o">-</span><span class="n">h</span><span class="o">+</span><span class="n">h0</span>
</span></span><span class="line"><span class="cl">    <span class="n">edg_points</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">y</span><span class="p">,</span> <span class="n">xh</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">edg_points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">y0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">horn</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">spline</span><span class="p">(</span><span class="n">edg_points</span><span class="p">)</span><span class="o">.</span><span class="n">wire</span><span class="p">()</span><span class="o">.</span><span class="n">revolve</span><span class="p">()</span>
</span></span></code></pre></div><p><img src="../../images/post/cadquery-collection/horn1.jpg" alt="3d printed horn"></p>
<p>Lecleach suggests that it&rsquo;s important to shape the horn past 180 degrees but as you can see it can be tricky to 3d print the involute part of the horn. Would be interesting to come up with some 3D printing hack to print the involute. Maybe one day I will come back to this topic to try something in this direction. (<strong>Message from the future:</strong> It never happened, I never got back to this.)</p>
<h3 id="dovetail-guide-01042019">Dovetail Guide (01/04/2019)</h3>
<p><img src="../../images/post/cadquery-collection/dovetail_guide.svg" alt="dovetail-jig-embossed"></p>
<p>This is my take on dovetail guides, I designed this to be 3d printed and parametric. Using parametric design makes it very easy to tune the dovetail ratio and to fit different magnets that one may have at hand. Higher ratios (e.g 1:8) are good for hardwoods and lower ratios (e.g. 1:5) are better suited for softwoods.</p>
<p>Several models can be found on the internet and I would like to buy one but with all the import taxes it becomes expensive. Also I don&rsquo;t know what ratio I want exactly, so it makes sense to print my own to experiment with.</p>
<p>I was particularly inspired by <a href="http://www.davidbarronfurniture.co.uk/" title="David Barron website">David Barron</a> and as seen in his videos, the simple jig works with magnets that hold the saw in place, making the dovetail cutting process easier.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># A simple dovetail saw guide for woodworking </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">size</span> <span class="o">=</span> <span class="mf">40.0</span>                     <span class="c1">#mm, size of the blank </span>
</span></span><span class="line"><span class="cl"><span class="n">ratio</span> <span class="o">=</span> <span class="mi">6</span>                       <span class="c1">#dovetail ratio e.g. 1:6.</span>
</span></span><span class="line"><span class="cl"><span class="n">tab_top</span> <span class="o">=</span> <span class="mf">15.0</span>                  <span class="c1">#mm, thickness of the top tab</span>
</span></span><span class="line"><span class="cl"><span class="n">tab_back</span> <span class="o">=</span> <span class="mf">15.0</span>                 <span class="c1">#mm, thickness of the back tab</span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_diameter</span> <span class="o">=</span> <span class="mf">5.2</span>           <span class="c1">#mm</span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_thickness</span> <span class="o">=</span> <span class="mf">8.5</span>          <span class="c1">#mm </span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_spacing_between</span> <span class="o">=</span> <span class="mf">24.0</span>   <span class="c1">#mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">embossing</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">dovetail_guide</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;top&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="n">size</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">size</span><span class="o">-</span><span class="p">(</span><span class="n">size</span><span class="o">/</span><span class="nb">float</span> <span class="p">(</span><span class="n">ratio</span><span class="p">))</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span><span class="o">.</span><span class="n">loft</span><span class="p">(</span><span class="n">combine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">tab_top</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span><span class="o">.</span><span class="n">cutBlind</span><span class="p">(</span><span class="o">-</span><span class="n">size</span><span class="o">+</span><span class="n">tab_back</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pushPoints</span><span class="p">([(</span><span class="o">-</span><span class="n">magnet_spacing_between</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">tab_top</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">magnet_spacing_between</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">tab_top</span><span class="o">/</span><span class="mi">2</span><span class="p">)])</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">magnet_diameter</span><span class="p">,</span> <span class="n">magnet_thickness</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pushPoints</span><span class="p">([(</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">tab_back</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">magnet_spacing_between</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">tab_back</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">magnet_spacing_between</span><span class="o">/</span><span class="mi">2</span><span class="p">)])</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">magnet_diameter</span><span class="p">,</span> <span class="n">magnet_thickness</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">embossing</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">dovetail_guide</span> <span class="o">=</span> <span class="n">dovetail_guide</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span> <span class="o">=</span> <span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&#34;1:&#34;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ratio</span><span class="p">),</span> <span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">cut</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">combine</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">clean</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;regular&#39;</span><span class="p">,</span> <span class="n">halign</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">valign</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="sawing-guides-08052020">Sawing Guides (08/05/2020)</h3>
<p><img src="../../images/post/cadquery-collection/right_angle_guide.svg" alt="sawing-guides"></p>
<p>The idea here is the same as my dovetail jig but now one is intended to aid making square cuts on wood with hand saws and the other 45 degrees cut for joinery.</p>
<p>I put the option of having a recess on these two jigs for clearance between the saw and the jig itself. I realized that depending on how you execute the cut the saw may bite the jig. It doesn&rsquo;t alter the performance of the jig, but it leaves scratch marks. Cutting a recess on the dovetail jig makes it unbalanced but these two not, at least in my opinion.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># A simple woodworking jig for guiding a saw at right angles.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">size</span> <span class="o">=</span> <span class="mf">50.0</span>                     <span class="c1"># mm, size of the blank</span>
</span></span><span class="line"><span class="cl"><span class="n">width</span> <span class="o">=</span> <span class="mf">35.0</span>                    <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">tab_top</span> <span class="o">=</span> <span class="mf">18.0</span>                  <span class="c1"># mm, thickness of the top tab</span>
</span></span><span class="line"><span class="cl"><span class="n">tab_back</span> <span class="o">=</span> <span class="mf">12.0</span>                 <span class="c1"># mm, thickness of the back tab</span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_diameter</span> <span class="o">=</span> <span class="mf">5.2</span>           <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_thickness</span> <span class="o">=</span> <span class="mf">8.5</span>          <span class="c1"># mm </span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_spacing_between</span> <span class="o">=</span> <span class="mf">30.0</span>   <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">clearance</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="n">clearance_size</span> <span class="o">=</span> <span class="mf">2.0</span>             <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">right_angle_guide</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;top&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span><span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pushPoints</span><span class="p">([(</span><span class="o">-</span><span class="n">magnet_spacing_between</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">tab_top</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">magnet_spacing_between</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">tab_top</span><span class="o">/</span><span class="mi">2</span><span class="p">)])</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">magnet_diameter</span><span class="p">,</span> <span class="n">magnet_thickness</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=-</span><span class="n">tab_back</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">tab_top</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="o">-</span><span class="n">tab_top</span><span class="p">)</span><span class="o">.</span><span class="n">cutBlind</span><span class="p">(</span><span class="s2">&#34;next&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">clearance</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">right_angle_guide</span> <span class="o">=</span> <span class="n">right_angle_guide</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">tab_top</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span><span class="o">.</span><span class="n">cutBlind</span><span class="p">(</span><span class="o">-</span><span class="n">clearance_size</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># A simple 45 degrees hand saw guide for woodworking </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">size</span> <span class="o">=</span> <span class="mf">40.0</span>                      <span class="c1"># mm, height and lenght and of the guide. The width is double this value</span>
</span></span><span class="line"><span class="cl"><span class="n">tab_top</span> <span class="o">=</span> <span class="mf">18.0</span>                   <span class="c1"># mm, thickness of the top tab</span>
</span></span><span class="line"><span class="cl"><span class="n">tab_back</span> <span class="o">=</span> <span class="mf">12.0</span>                  <span class="c1"># mm, thickness of the back tab</span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_diameter</span> <span class="o">=</span> <span class="mf">5.2</span>            <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_thickness</span> <span class="o">=</span> <span class="mf">8.5</span>           <span class="c1"># mm </span>
</span></span><span class="line"><span class="cl"><span class="n">magnet_spacing_between</span> <span class="o">=</span> <span class="mf">30.0</span>    <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">clearance</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="n">clearance_size</span> <span class="o">=</span> <span class="mf">2.0</span>             <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">guide</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;front&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">lineTo</span><span class="p">(</span><span class="n">size</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">lineTo</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">	<span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pushPoints</span><span class="p">([(</span><span class="o">-</span><span class="n">magnet_spacing_between</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">tab_top</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">magnet_spacing_between</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">tab_top</span><span class="o">/</span><span class="mi">2</span><span class="p">)])</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">magnet_diameter</span><span class="p">,</span> <span class="n">magnet_thickness</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">	<span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">,</span> <span class="n">invert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">tab_back</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tab_top</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">size</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">-</span><span class="n">tab_top</span><span class="p">)</span><span class="o">.</span><span class="n">cutBlind</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">clearance</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">guide</span> <span class="o">=</span> <span class="n">guide</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s1">&#39;&gt;(1,1,0)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">tab_top</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">size</span><span class="o">*</span><span class="mf">1.6</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span><span class="o">.</span><span class="n">cutBlind</span><span class="p">(</span><span class="o">-</span><span class="n">clearance_size</span><span class="p">)</span>
</span></span></code></pre></div><p>Recently I got myself a Gyokucho 615 and I could test it with the jig. No need to say it works like a charm. The cut was square and the texture of the end grain after the cut was very smooth. What a saw, btw! I managed to make a few frames with this setup.</p>
<p><img src="../../images/post/cadquery-collection/frames.jpg" alt="frames"></p>
<h3 id="parametric-spiral-lampshade-11052020">Parametric Spiral Lampshade (11/05/2020)</h3>
<p><img src="../../images/post/cadquery-collection/spiral_lampshade.svg" alt="spiral-lampshade"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">length</span> <span class="o">=</span> <span class="mf">150.0</span>            <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">max_height</span> <span class="o">=</span> <span class="mf">150.0</span>        <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">height_increment</span> <span class="o">=</span> <span class="mf">15.0</span>   <span class="c1"># mm, Z axis increment per step</span>
</span></span><span class="line"><span class="cl"><span class="n">rotation_step</span> <span class="o">=</span> <span class="mi">10</span>        <span class="c1"># degrees, rotation of the XY plane per step</span>
</span></span><span class="line"><span class="cl"><span class="n">growth_factor</span> <span class="o">=</span> <span class="mf">1.1</span>       <span class="c1"># maybe decrease factor ? Â¯\_(ãƒ„)_/Â¯</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">spiral_lampshade</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;front&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mf">1.618</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">workplane</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="n">height_increment</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mf">1.618</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">loft</span><span class="p">(</span><span class="n">combine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">next_len</span> <span class="o">=</span> <span class="nb">float</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">height</span> <span class="o">=</span> <span class="nb">float</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation_step</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="n">height</span> <span class="o">&lt;=</span> <span class="n">max_height</span><span class="o">-</span><span class="n">height_increment</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">next_len</span> <span class="o">=</span> <span class="n">length</span><span class="o">/</span><span class="n">growth_factor</span>
</span></span><span class="line"><span class="cl">    <span class="n">spiral_lampshade</span> <span class="o">=</span> <span class="n">spiral_lampshade</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mf">1.618</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height_increment</span><span class="p">),</span> <span class="n">rotate</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">rotation</span><span class="p">))</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">next_len</span><span class="o">/</span><span class="mf">1.618</span><span class="p">,</span> <span class="n">next_len</span><span class="p">)</span><span class="o">.</span><span class="n">loft</span><span class="p">(</span><span class="n">combine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">length</span> <span class="o">=</span> <span class="n">next_len</span>
</span></span><span class="line"><span class="cl">    <span class="n">rotation</span> <span class="o">+=</span> <span class="n">rotation_step</span>
</span></span><span class="line"><span class="cl">    <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="o">+</span><span class="n">height_increment</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">show_object</span><span class="p">(</span><span class="n">spiral_lampshade</span><span class="p">)</span>
</span></span></code></pre></div><p><img src="../../images/post/cadquery-collection/spiral_lampshade.jpg" alt="spiral lampshade"></p>
<h3 id="plywood-connectors-13052020">Plywood Connectors (13/05/2020)</h3>
<p><img src="../../images/post/cadquery-collection/plywood_connectors.svg" alt="ply-connector"></p>
<p>I made this about two years ago and even though I liked the outcome pretty much I decided not to post anything about it at the time.</p>
<p>I didn&rsquo;t want to harm in any way the company that makes the original but at this point it doesn&rsquo;t make any sense to hold back, googling &ldquo;plywood connectors&rdquo; or &ldquo;wood connectors DIY furniture&rdquo; you will find a vast amount of Chinese knockoffs.</p>
<p>At the time of writing I found <a href="https://cults3d.com/en/3d-model/home/parametric-furniture-joints-with-grasshopper-download-free-parameter-by-othmane-march-22-2020" title="cults 3d model">this</a> on the internet. Another interesting thing I found was this <a href="https://www.plyproducts.com/" title="plyproducts website">aluminium version</a> where they claim to be in business since 2013.</p>
<p>I first learned about this by the name of <a href="https://www.playwood.it/" title="playwood website">playwood</a>. I found it when I was looking for a small bookshelf DIY project. There are some reasons why I didn&rsquo;t buy directly from these guys. First, they are not super expensive but you need quite a few in order to make something useful, then, with post and import taxes it starts to become expensive. Second, I have 3d printers and I like to make stuff.</p>
<p>As always, I kept the design as minimalist as possible. My version takes a socket head cap screw on one side and a hex nut on the other side. I&rsquo;ve used M6 screws because it was what I had at hand at the time but I&rsquo;m pretty sure smaller screws are also OK for this application.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">pi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># shared parameters</span>
</span></span><span class="line"><span class="cl"><span class="n">thickness</span> <span class="o">=</span> <span class="mf">12.0</span>             <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">width</span> <span class="o">=</span> <span class="mf">10.0</span>                 <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">screw_clearance</span> <span class="o">=</span> <span class="mf">6.8</span>        <span class="c1"># mm, diameter of the screw + some clearance</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># outer jaw parameters</span>
</span></span><span class="line"><span class="cl"><span class="n">oface_length</span> <span class="o">=</span> <span class="mf">38.0</span>          <span class="c1"># mm outer face length</span>
</span></span><span class="line"><span class="cl"><span class="n">oleg_length</span> <span class="o">=</span> <span class="mf">42.0</span>           <span class="c1"># mm outer leg length</span>
</span></span><span class="line"><span class="cl"><span class="n">support_height</span> <span class="o">=</span> <span class="mf">4.0</span>         <span class="c1"># mm, I&#39;m calling support this small bump where the plywood butt will rest against</span>
</span></span><span class="line"><span class="cl">                             <span class="c1"># minimum plywood thickness it will hold = sqrt(2)*support_height BTW</span>
</span></span><span class="line"><span class="cl"><span class="n">counterBore_diameter</span> <span class="o">=</span> <span class="mf">11.2</span>  <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">screwHead_height</span> <span class="o">=</span> <span class="mf">6.0</span>       <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># inner jaw parameters </span>
</span></span><span class="line"><span class="cl"><span class="c1"># This inner leg lenght is just a recomendation, it will be flush with the outer jaw leg</span>
</span></span><span class="line"><span class="cl"><span class="n">ileg_length</span> <span class="o">=</span> <span class="n">oleg_length</span><span class="o">-</span><span class="p">(</span><span class="n">thickness</span><span class="o">+</span><span class="n">support_height</span><span class="p">)</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#inner jaw hardware parameters</span>
</span></span><span class="line"><span class="cl"><span class="n">nut_thickness</span> <span class="o">=</span> <span class="mf">5.0</span>            <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">nut_widthAcrossCorners</span> <span class="o">=</span> <span class="mf">12.0</span>  <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ojaw</span> <span class="o">=</span> <span class="p">(</span><span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;front&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="o">-</span><span class="n">oface_length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">(</span><span class="o">-</span><span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">oleg_length</span><span class="p">,</span> <span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">oleg_length</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">(</span><span class="n">thickness</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">((</span><span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">oleg_length</span><span class="o">-</span><span class="n">thickness</span><span class="p">),</span> <span class="o">-</span><span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">oleg_length</span><span class="o">+</span><span class="n">thickness</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">(</span><span class="n">support_height</span><span class="p">,</span> <span class="n">support_height</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">lineTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">thickness</span><span class="o">+</span><span class="n">support_height</span><span class="p">)</span><span class="o">.</span><span class="n">mirrorY</span><span class="p">()</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">both</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">cboreHole</span><span class="p">(</span><span class="n">screw_clearance</span><span class="p">,</span> <span class="n">counterBore_diameter</span><span class="p">,</span> <span class="n">screwHead_height</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ijaw</span> <span class="o">=</span> <span class="p">(</span><span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;front&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">oface_length</span><span class="o">-</span><span class="p">(</span><span class="n">thickness</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="n">thickness</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="o">-</span><span class="n">support_height</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">(</span><span class="o">-</span><span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">ileg_length</span><span class="p">,</span> <span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">ileg_length</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">(</span><span class="n">thickness</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">((</span><span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">ileg_length</span><span class="o">-</span><span class="n">thickness</span><span class="p">),</span> <span class="o">-</span><span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">ileg_length</span><span class="o">+</span><span class="n">thickness</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">lineTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">thickness</span><span class="p">)</span><span class="o">.</span><span class="n">mirrorY</span><span class="p">()</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">both</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="n">screw_clearance</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Y[-2]&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">polygon</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">nut_widthAcrossCorners</span><span class="p">)</span><span class="o">.</span><span class="n">cutBlind</span><span class="p">(</span><span class="o">-</span><span class="n">nut_thickness</span><span class="p">)</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">translate</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="n">thickness</span><span class="o">+</span><span class="n">support_height</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
</span></span></code></pre></div><p><img src="../../images/post/cadquery-collection/plywood_connector2.jpg" alt="plywood connector2"></p>
<h3 id="man-against-washing-machine-15052020">Man Against Washing Machine (15/05/2020)</h3>
<p><img src="../../images/post/cadquery-collection/washing_machine_foot.svg" alt="washing_machine_foot"></p>
<p>One of my personal favorite uses of 3d printers at home is to fix broken stuff. This object is not special but I&rsquo;m posting it here because it involves modeling parametric threads.</p>
<p>This is a simple trapezoidal thread. For something more elaborate, check the last entry of this post.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span> 
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">pi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">lenght</span> <span class="o">=</span> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">minor_diameter</span> <span class="o">=</span> <span class="mf">18.0</span>
</span></span><span class="line"><span class="cl"><span class="n">pitch</span> <span class="o">=</span> <span class="mf">4.9</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pts</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lenght</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">x</span> <span class="o">=</span> <span class="n">minor_diameter</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">y</span> <span class="o">=</span> <span class="n">minor_diameter</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">z</span> <span class="o">=</span> <span class="n">pitch</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">t</span>           <span class="c1"># helix lenght</span>
</span></span><span class="line"><span class="cl">    <span class="n">pts</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">path</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">spline</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span><span class="o">.</span><span class="n">wire</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">thread</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XZ&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">minor_diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mf">3.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="o">-</span><span class="mf">3.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="o">.</span><span class="n">sweep</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">isFrenet</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">foot</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="mf">18.5</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="mf">26.0</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="mf">25.0</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">polygon</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mf">44.0</span><span class="p">)</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="mf">14.0</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">hole</span><span class="p">(</span><span class="mf">14.0</span><span class="p">,</span> <span class="mf">42.0</span><span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pitch</span><span class="o">/</span><span class="mf">2.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">foot</span> <span class="o">=</span> <span class="n">foot</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
</span></span></code></pre></div><p>This object is a washing machine adjustment pad that went missing (don&rsquo;t ask me how). At least there were 3 left so I could replicate the missing one. The tolerance on the mating thread was big, because even printing without support on my cheap 3d printer, it worked in the first attempt! No second iteration was needed :)</p>
<p><img src="../../images/post/cadquery-collection/washing_machine_foot.jpg" alt="Washing_Machine_Foot"></p>
<h3 id="parametric-stepper-motor-bracket-01022020">Parametric Stepper Motor Bracket (01/02/2020)</h3>
<p><img src="../../images/post/cadquery-collection/stepper_bracket.svg" alt="stepper-bracket"></p>
<p>The price estimations that I received for this object to have it made out of welded steel (by professional welders), were in the 100-130 EUROS range, 10 days delivery time. As the application intended for it had a light load I decided to just model and 3d print it. Took me half an hour of 3d modeling and 4 hours for the 3d printing process. I printed it out of ABS on a professional grade printer from the university.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">width</span> <span class="o">=</span> <span class="mf">66.0</span>                   <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">fplate_height</span> <span class="o">=</span> <span class="mf">60.0</span>           <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">fplate_thickness</span> <span class="o">=</span> <span class="mf">10.0</span>        <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">fplate_between_holes</span> <span class="o">=</span> <span class="mf">47.1</span>    <span class="c1"># mm, rectangular distance between stepper mounting holes (NEMA 23 = 47.1)</span>
</span></span><span class="line"><span class="cl"><span class="n">fplate_screw_clearance</span> <span class="o">=</span> <span class="mf">5.0</span>   <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">fplate_cbore_diameter</span> <span class="o">=</span> <span class="mf">7.5</span>    <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">fplate_cbore_depth</span> <span class="o">=</span> <span class="mf">4.0</span>       <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">main_bore_diameter</span> <span class="o">=</span> <span class="mf">28.2</span>      <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">main_cbore_diameter</span> <span class="o">=</span> <span class="mf">40.0</span>     <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">main_cbore_depth</span> <span class="o">=</span> <span class="mf">2.0</span>         <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">bplate_length</span> <span class="o">=</span> <span class="mf">86.0</span>           <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">bplate_thickness</span> <span class="o">=</span> <span class="mf">4.0</span>         <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">bplate_between_holes</span> <span class="o">=</span> <span class="mf">50.0</span>    <span class="c1"># mm, holes to mount it to the frame</span>
</span></span><span class="line"><span class="cl"><span class="n">bplate_holes_offset</span> <span class="o">=</span> <span class="mf">5.0</span>      <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">bplate_screw_clearance</span> <span class="o">=</span> <span class="mf">5.0</span>   <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">bplate_cbore_diameter</span> <span class="o">=</span> <span class="mf">7.5</span>    <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">bplate_cbore_depth</span> <span class="o">=</span> <span class="mf">2.0</span>       <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl"><span class="n">gusset_thickness</span> <span class="o">=</span> <span class="mf">3.0</span>         <span class="c1"># mm</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">gusset</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">stepper_bracket</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;front&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">fplate_thickness</span><span class="p">,</span> <span class="n">fplate_height</span><span class="o">+</span><span class="n">bplate_thickness</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">bplate_thickness</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">fplate_between_holes</span><span class="p">,</span> <span class="n">fplate_between_holes</span><span class="p">,</span> <span class="n">forConstruction</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">vertices</span><span class="p">()</span><span class="o">.</span><span class="n">cboreHole</span><span class="p">(</span><span class="n">fplate_screw_clearance</span><span class="p">,</span> <span class="n">fplate_cbore_diameter</span><span class="p">,</span> <span class="n">fplate_cbore_depth</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">bplate_thickness</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cboreHole</span><span class="p">(</span><span class="n">main_bore_diameter</span><span class="p">,</span> <span class="n">main_cbore_diameter</span><span class="p">,</span> <span class="n">main_cbore_depth</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Y&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">fplate_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">bplate_thickness</span><span class="p">)</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="n">bplate_length</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;Z[1]&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">bplate_holes_offset</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">bplate_between_holes</span><span class="p">,</span> <span class="n">bplate_between_holes</span><span class="p">,</span> <span class="n">forConstruction</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">vertices</span><span class="p">()</span><span class="o">.</span><span class="n">cboreHole</span><span class="p">(</span><span class="n">bplate_screw_clearance</span><span class="p">,</span> <span class="n">bplate_cbore_diameter</span><span class="p">,</span> <span class="n">bplate_cbore_depth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">gusset</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">stepper_bracket</span> <span class="o">=</span> <span class="n">stepper_bracket</span><span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="n">fplate_height</span><span class="o">+</span><span class="n">bplate_thickness</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">((</span><span class="n">bplate_length</span><span class="o">+</span><span class="n">fplate_thickness</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fplate_height</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="o">-</span><span class="n">gusset_thickness</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&lt;X&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">(</span><span class="n">centerOption</span><span class="o">=</span><span class="s1">&#39;CenterOfBoundBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="n">fplate_height</span><span class="o">+</span><span class="n">bplate_thickness</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">line</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">bplate_length</span><span class="o">+</span><span class="n">fplate_thickness</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fplate_height</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="o">-</span><span class="n">gusset_thickness</span><span class="p">)</span>
</span></span></code></pre></div><p><img src="../../images/post/cadquery-collection/stepper_motor_bracket2.png" alt="stepper_bracket"></p>
<h3 id="a-screwed-knob-10032022">A screwed knob (10/03/2022)</h3>
<p><img src="../../images/post/cadquery-collection/screwed_knob.svg" alt="screwed_knob_vectorial"></p>
<p>I don&rsquo;t know why but the 3d printer comes from the factory with a lock and key. I decided to just swap it with a simple knob. It would be a nice test print, So I designed a knob with a threads that fit the nut from the keylock that came with the machine.</p>
<p>Here follows the cadquery code for the design.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cadquery</span> <span class="k">as</span> <span class="nn">cq</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">cadquery</span> <span class="kn">import</span> <span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">pi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">helix</span><span class="p">(</span><span class="n">r0</span><span class="p">,</span><span class="n">r_eps</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">frac</span><span class="o">=</span><span class="mf">1e-1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">       
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">t</span><span class="o">&gt;</span><span class="n">frac</span> <span class="ow">and</span> <span class="n">t</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">-</span><span class="n">frac</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">z</span> <span class="o">=</span> <span class="n">h</span><span class="o">*</span><span class="n">t</span> <span class="o">+</span> <span class="n">d</span>
</span></span><span class="line"><span class="cl">            <span class="n">r</span> <span class="o">=</span> <span class="n">r0</span><span class="o">+</span><span class="n">r_eps</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">t</span><span class="o">&lt;=</span><span class="n">frac</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">z</span> <span class="o">=</span> <span class="n">h</span><span class="o">*</span><span class="n">t</span> <span class="o">+</span> <span class="n">d</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span> <span class="o">*</span><span class="n">t</span><span class="o">/</span><span class="n">frac</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">r</span> <span class="o">=</span> <span class="n">r0</span> <span class="o">+</span> <span class="n">r_eps</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span> <span class="o">*</span><span class="n">t</span><span class="o">/</span><span class="n">frac</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">z</span> <span class="o">=</span> <span class="n">h</span><span class="o">*</span><span class="n">t</span> <span class="o">-</span> <span class="n">d</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span> <span class="o">-</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">frac</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">r</span> <span class="o">=</span> <span class="n">r0</span> <span class="o">-</span> <span class="n">r_eps</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span> <span class="o">-</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">frac</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           
</span></span><span class="line"><span class="cl">        <span class="n">x</span> <span class="o">=</span> <span class="n">r</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="p">(</span><span class="n">p</span><span class="o">/</span><span class="n">h</span><span class="p">)</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">y</span> <span class="o">=</span> <span class="n">r</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="p">(</span><span class="n">p</span><span class="o">/</span><span class="n">h</span><span class="p">)</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">func</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">thread</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">radius_eps</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span> <span class="mi">10</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="n">e1_bottom</span> <span class="o">=</span> <span class="p">(</span><span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">parametricCurve</span><span class="p">(</span><span class="n">helix</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pitch</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="o">-</span><span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">val</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">    <span class="n">e1_top</span> <span class="o">=</span> <span class="p">(</span><span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">parametricCurve</span><span class="p">(</span><span class="n">helix</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pitch</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">val</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="n">e2_bottom</span> <span class="o">=</span> <span class="p">(</span><span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">parametricCurve</span><span class="p">(</span><span class="n">helix</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span><span class="n">radius_eps</span><span class="p">,</span><span class="n">pitch</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="o">-</span><span class="n">d</span><span class="o">/</span><span class="n">aspect</span><span class="p">))</span><span class="o">.</span><span class="n">val</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">    <span class="n">e2_top</span> <span class="o">=</span> <span class="p">(</span><span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">parametricCurve</span><span class="p">(</span><span class="n">helix</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span><span class="n">radius_eps</span><span class="p">,</span><span class="n">pitch</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="n">d</span><span class="o">/</span><span class="n">aspect</span><span class="p">))</span><span class="o">.</span><span class="n">val</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="n">f1</span> <span class="o">=</span> <span class="n">Face</span><span class="o">.</span><span class="n">makeRuledSurface</span><span class="p">(</span><span class="n">e1_bottom</span><span class="p">,</span> <span class="n">e1_top</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">f2</span> <span class="o">=</span> <span class="n">Face</span><span class="o">.</span><span class="n">makeRuledSurface</span><span class="p">(</span><span class="n">e2_bottom</span><span class="p">,</span> <span class="n">e2_top</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">f3</span> <span class="o">=</span> <span class="n">Face</span><span class="o">.</span><span class="n">makeRuledSurface</span><span class="p">(</span><span class="n">e1_bottom</span><span class="p">,</span> <span class="n">e2_bottom</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">f4</span> <span class="o">=</span> <span class="n">Face</span><span class="o">.</span><span class="n">makeRuledSurface</span><span class="p">(</span><span class="n">e1_top</span><span class="p">,</span> <span class="n">e2_top</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="n">sh</span> <span class="o">=</span> <span class="n">Shell</span><span class="o">.</span><span class="n">makeShell</span><span class="p">([</span><span class="n">f1</span><span class="p">,</span><span class="n">f2</span><span class="p">,</span><span class="n">f3</span><span class="p">,</span><span class="n">f4</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="n">rv</span> <span class="o">=</span> <span class="n">Solid</span><span class="o">.</span><span class="n">makeSolid</span><span class="p">(</span><span class="n">sh</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">rv</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">radius</span> <span class="o">=</span> <span class="mf">10.0</span>
</span></span><span class="line"><span class="cl"><span class="n">pitch</span> <span class="o">=</span> <span class="mf">1.8</span>
</span></span><span class="line"><span class="cl"><span class="n">height</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="n">d</span> <span class="o">=</span> <span class="n">pitch</span><span class="o">/</span><span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="n">radius_eps</span> <span class="o">=</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="cl"><span class="n">eps</span><span class="o">=</span><span class="mf">1e-3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">core</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">radius</span><span class="o">+</span><span class="n">eps</span><span class="p">)</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="n">height</span><span class="o">+</span><span class="mf">1.75</span><span class="o">*</span><span class="n">d</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">th1</span> <span class="o">=</span> <span class="n">thread</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span><span class="n">pitch</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">radius_eps</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">handle</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&#34;XY&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">)</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="mf">22.0</span><span class="p">,</span> <span class="mf">22.0</span><span class="p">)</span><span class="o">.</span><span class="n">extrude</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">faces</span><span class="p">(</span><span class="s2">&#34;&gt;Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">workplane</span><span class="p">()</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="mf">22.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">workplane</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mf">16.0</span><span class="p">)</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="mf">14.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">loft</span><span class="p">(</span><span class="n">combine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">.</span>\
</span></span><span class="line"><span class="cl">    <span class="n">edges</span><span class="p">(</span><span class="s2">&#34;|Z&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">chamfer</span><span class="p">(</span><span class="mf">4.0</span><span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">5.3</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">res</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">th1</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</span></span></code></pre></div><p><img src="../../images/post/cadquery-collection/threaded_knob.png" alt="screwed_knob_vectorial"></p>
<p>Can we take a moment to appreatiate the entry of the threads? (exit is similar, but not shown here). I think that&rsquo;s super nice!</p>
<p><img src="../../images/post/cadquery-collection/thread_entry_detail.png" alt="thread_entry_detail"></p>
<p>Well, that&rsquo;s it for the moment!</p>
<p>Cheers,</p>
<p>Edi</p>

          </div>
        </div>
        
        
      </div>
    </div>
  </div>
</section>



<footer>
  <div class="container">
    <div class="row justify-content-center">

      
      <div class="widget col-lg-12">
          <ul class="list-inline">
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/3d-printing">3d printing</a></li>
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/cad">Cad</a></li>
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/cadquery">Cadquery</a></li>
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/libfive">Libfive</a></li>
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/lisp">Lisp</a></li>
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/music">Music</a></li>
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/programming">Programming</a></li>
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/python">Python</a></li>
            <li class="list-inline-item"><a class="d-block p-2 bg-primary text-white"
                                            href="/tags/scheme">Scheme</a></li>
          </ul>
      </div>

      
        
          <div class="col-lg-3 mb-5">
            <h6 class="mb-4">Contact Me</h6>
              <ul class="list-unstyled">
              
                <li class="mb-3"><a class="text-dark" href="mailto:eddie.liberatoe@gmail.com"><i
                                    class="ti-email mr-3 text-primary"></i>eddie.liberatoe@gmail.com</a>
              
                </li>

              
                <li class="mb-3"><i class="ti-location-pin mr-3 text-primary"></i>ZÃ¼rich, Switzerland</li>
              
                </li>
            </ul>
             
          </div>


      <div class="col-lg-3 mb-5">
        <h6 class="mb-4">Categories</h6>
        <ul class="list-unstyled">
          <li class="mb-3"><a class="text-dark"
              href="/categories/engineering">Engineering</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/non-technical">Non technical</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/programming">Programming</a>
          </li>
        </ul>
      </div>

      <div class="col-lg-3 mb-5">
        <h6 class="mb-4">Quick Links</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="https://eddieliberato.github.io/about">About</a></li>
          
        </ul>
      </div>

    </div>
  </div>
</footer>

<script>
  var indexURL = "https://eddieliberato.github.io/index.json"
</script>

<!-- JS Plugins -->

<script src="https://eddieliberato.github.io/plugins/jQuery/jquery.min.js"></script>

<script src="https://eddieliberato.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://eddieliberato.github.io/plugins/search/fuse.min.js"></script>

<script src="https://eddieliberato.github.io/plugins/search/mark.js"></script>

<script src="https://eddieliberato.github.io/plugins/search/search.js"></script>


<!-- Main Script -->

<script src="https://eddieliberato.github.io/js/script.min.js"></script>




</body>
</html>
